Configuracao:
  actAs:
    Timestampable: ~
  options:
    type: MyISAM
    collate: utf8_unicode_ci
    charset: utf8
  columns:
    instituicao:
      type: string(100)
      notnull: true
    email:
      type: string(100)
      notnull: true
    telefone:
      type: string(50)
      notnull: true
    alunos_por_professor:
      type: integer
      notnull: true

Usuario:
  actAs:
    Timestampable: ~
  options:
    type: MyISAM
    collate: utf8_unicode_ci
    charset: utf8
  columns:
    nome:
      type: string(50)
      notnull: true
    email:
      type: string(100)
      notnull: true
      unique: true
    senha: 
      type: string(128)
      notnull: true

Administrador:
  options:
    type: MyISAM
    collate: utf8_unicode_ci
    charset: utf8
  inheritance:
    extends: Usuario
    #type: concrete
    type: column_aggregation
    keyField: type
    keyValue: administrador

Academico:
  #abstract: true
  options:
    type: MyISAM
    collate: utf8_unicode_ci
    charset: utf8
  inheritance:
    extends: Usuario
    #type: concrete
    type: column_aggregation
    keyField: type
    keyValue: academico
  columns:
    matricula: 
      type: string(20)
      notnull: true
      #unique: true
    endereco: 
      type: string(200)
      notnull: true
    fone_residencial: 
      type: string(20)
      notnull: true
    fone_celular: 
      type: string(20)
      notnull: true

Professor:
  options:
    type: MyISAM
    collate: utf8_unicode_ci
    charset: utf8
  inheritance:
    extends: Academico
    #type: concrete
    type: column_aggregation
    keyField: type
    keyValue: professor
  columns: 
    coordenador: 
      type: boolean
      notnull: true
      default: false
  relations:
    AreasAfinidade:
      foreignAlias: Professores
      class: AreaAfinidade
      refClass: ProfessorAreaAfinidade
    Orientandos:
      class: Aluno
      local: professor_id
      foreign: aluno_id      
      refClass: Orientacao
          
AreaAfinidade:
  options:
    type: MyISAM
    collate: utf8_unicode_ci
    charset: utf8
  actAs: 
    Sluggable:
      fields: [nome]
  columns:
    nome:
      type: string(50)
      notnull: true 
      
ProfessorAreaAfinidade:
  options:
    type: MyISAM
    collate: utf8_unicode_ci
    charset: utf8    
  columns: 
    professor_id:
      type: integer(4) 
      primary: true    
    area_afinidade_id:
      type: integer(4) 
      primary: true    
  relations:
    Professor:
      foreignAlias: ProfessorAreasAfinidade
    AreaAfinidade:
      foreignAlias: ProfessorAreasAfinidade      
    
AreaInteresse:
  options:
    type: MyISAM
    collate: utf8_unicode_ci
    charset: utf8
  columns:
    professor_id:
      type: integer
      notnull: true
    nome: 
      type: string(50)
      notnull: true
  relations:
    Professor:
    onDelete: CASCADE
    foreignAlias: AreasInteresse
      
Aluno:
  options:
    type: MyISAM
    collate: utf8_unicode_ci
    charset: utf8
  inheritance:
    extends: Academico
    type: column_aggregation
    keyField: type
    keyValue: aluno
  relations:
    Orientador:
      class: Professor
      local: aluno_id
      foreign: professor_id
      refClass: Orientacao
      
Orientacao:
  options:
    type: MyISAM
    collate: utf8_unicode_ci
    charset: utf8
  columns:
    aluno_id:
      type: integer
      primary: true
    professor_id:
      type: integer
      primary: true
    aceito:
      type: boolean
      
