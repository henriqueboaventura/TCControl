CREATE TABLE usuario (id BIGINT AUTO_INCREMENT, nome VARCHAR(50) NOT NULL, email VARCHAR(100) NOT NULL UNIQUE, senha VARCHAR(128) NOT NULL, type VARCHAR(255), matricula VARCHAR(20) NOT NULL, endereco VARCHAR(200) NOT NULL, fone_residencial VARCHAR(20) NOT NULL, fone_celular VARCHAR(20) NOT NULL, curso_id BIGINT, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = MyISAM;
CREATE TABLE usuario (id BIGINT AUTO_INCREMENT, nome VARCHAR(50) NOT NULL, email VARCHAR(100) NOT NULL UNIQUE, senha VARCHAR(128) NOT NULL, type VARCHAR(255), matricula VARCHAR(20) NOT NULL, endereco VARCHAR(200) NOT NULL, fone_residencial VARCHAR(20) NOT NULL, fone_celular VARCHAR(20) NOT NULL, curso_id BIGINT, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, INDEX curso_id_idx (curso_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = MyISAM;
CREATE TABLE area_afinidade (id BIGINT AUTO_INCREMENT, nome VARCHAR(50) NOT NULL, slug VARCHAR(255), UNIQUE INDEX area_afinidade_sluggable_idx (slug), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = MyISAM;
CREATE TABLE area_interesse (id BIGINT AUTO_INCREMENT, professor_id BIGINT NOT NULL, nome VARCHAR(50) NOT NULL, INDEX professor_id_idx (professor_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = MyISAM;
CREATE TABLE arquivo_versao (id BIGINT, remetente_id BIGINT, destinatario_id BIGINT, nome VARCHAR(100) NOT NULL, tipo VARCHAR(255) NOT NULL, path VARCHAR(100) NOT NULL, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, version BIGINT, PRIMARY KEY(id, version)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = MyISAM;
CREATE TABLE arquivo (id BIGINT AUTO_INCREMENT, remetente_id BIGINT, destinatario_id BIGINT, nome VARCHAR(100) NOT NULL, tipo VARCHAR(255) NOT NULL, path VARCHAR(100) NOT NULL, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, version BIGINT, INDEX remetente_id_idx (remetente_id), INDEX destinatario_id_idx (destinatario_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = MyISAM;
CREATE TABLE artigo_versao (id BIGINT, aluno_id BIGINT, conteudo LONGTEXT NOT NULL, status VARCHAR(255) DEFAULT '0', created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, version BIGINT, PRIMARY KEY(id, version)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = MyISAM;
CREATE TABLE artigo (id BIGINT AUTO_INCREMENT, aluno_id BIGINT, conteudo LONGTEXT NOT NULL, status VARCHAR(255) DEFAULT '0', created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, version BIGINT, INDEX aluno_id_idx (aluno_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = MyISAM;
CREATE TABLE artigo_avaliacao (id BIGINT AUTO_INCREMENT, artigo_id BIGINT, aprovada TINYINT(1), parecer TEXT, versao_proposta BIGINT NOT NULL, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, INDEX artigo_id_idx (artigo_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = MyISAM;
CREATE TABLE artigo_comentario (id BIGINT AUTO_INCREMENT, artigo_id BIGINT, conteudo TEXT NOT NULL, lido TINYINT(1) DEFAULT '0' NOT NULL, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, INDEX artigo_id_idx (artigo_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = MyISAM;
CREATE TABLE banca (id BIGINT AUTO_INCREMENT, aluno_id BIGINT NOT NULL, professor_id_1 BIGINT NOT NULL, professor_id_2 BIGINT NOT NULL, data_banca datetime NOT NULL, INDEX aluno_id_idx (aluno_id), INDEX professor_id_1_idx (professor_id_1), INDEX professor_id_2_idx (professor_id_2), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = MyISAM;
CREATE TABLE banca_avaliacao (id BIGINT AUTO_INCREMENT, banca_id BIGINT NOT NULL, avaliacao_professor_1 VARCHAR(255) NOT NULL, avaliacao_professor_2 VARCHAR(255) NOT NULL, avaliacao_geral VARCHAR(255) NOT NULL, parecer TEXT NOT NULL, INDEX banca_id_idx (banca_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = MyISAM;
CREATE TABLE configuracao (id BIGINT AUTO_INCREMENT, instituicao VARCHAR(100) NOT NULL, email VARCHAR(100) NOT NULL, telefone VARCHAR(50) NOT NULL, alunos_por_professor BIGINT NOT NULL, url VARCHAR(100) NOT NULL, semestre_atual VARCHAR(6) NOT NULL, data_entrega_tcc1 DATE NOT NULL, data_entrega_tcc2 DATE NOT NULL, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = MyISAM;
CREATE TABLE cronograma (id BIGINT AUTO_INCREMENT, proposta_id BIGINT, etapa VARCHAR(255), atividade VARCHAR(255) NOT NULL, produto VARCHAR(100) NOT NULL, data_entrega DATE NOT NULL, detalhamento TEXT, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, INDEX proposta_id_idx (proposta_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = MyISAM;
CREATE TABLE curso (id BIGINT AUTO_INCREMENT, nome VARCHAR(100) NOT NULL, PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = MyISAM;
CREATE TABLE mensagem (id BIGINT AUTO_INCREMENT, remetente_id BIGINT, destinatario_id BIGINT, original_id BIGINT, assunto VARCHAR(150) NOT NULL, conteudo TEXT NOT NULL, lido TINYINT(1) DEFAULT '0', created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, INDEX remetente_id_idx (remetente_id), INDEX destinatario_id_idx (destinatario_id), INDEX original_id_idx (original_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = MyISAM;
CREATE TABLE orientacao (aluno_id BIGINT, professor_id BIGINT, status VARCHAR(255) DEFAULT '0', PRIMARY KEY(aluno_id, professor_id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = MyISAM;
CREATE TABLE professor_area_afinidade (professor_id INT, area_afinidade_id INT, PRIMARY KEY(professor_id, area_afinidade_id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = MyISAM;
CREATE TABLE proposta_versao (id BIGINT, aluno_id BIGINT NOT NULL, titulo VARCHAR(255) NOT NULL, descricao_problema TEXT NOT NULL, descricao_solucao TEXT NOT NULL, objetivos TEXT NOT NULL, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, version BIGINT, PRIMARY KEY(id, version)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = MyISAM;
CREATE TABLE proposta (id BIGINT AUTO_INCREMENT, aluno_id BIGINT NOT NULL, titulo VARCHAR(255) NOT NULL, descricao_problema TEXT NOT NULL, descricao_solucao TEXT NOT NULL, objetivos TEXT NOT NULL, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, version BIGINT, INDEX aluno_id_idx (aluno_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = MyISAM;
CREATE TABLE proposta_avaliacao (id BIGINT AUTO_INCREMENT, proposta_id BIGINT, aprovada TINYINT(1), parecer TEXT, versao_proposta BIGINT NOT NULL, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, INDEX proposta_id_idx (proposta_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = MyISAM;
CREATE TABLE proposta_comentario (id BIGINT AUTO_INCREMENT, proposta_id BIGINT, conteudo TEXT NOT NULL, local VARCHAR(255), lido TINYINT(1) DEFAULT '0' NOT NULL, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, INDEX proposta_id_idx (proposta_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = MyISAM;
CREATE TABLE t_c_c (id BIGINT AUTO_INCREMENT, etapa VARCHAR(255) NOT NULL, aluno_id BIGINT, semestre VARCHAR(6) NOT NULL, INDEX aluno_id_idx (aluno_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = MyISAM;
CREATE TABLE usuario (id BIGINT AUTO_INCREMENT, nome VARCHAR(50) NOT NULL, email VARCHAR(100) NOT NULL UNIQUE, senha VARCHAR(128) NOT NULL, type VARCHAR(255), matricula VARCHAR(20) NOT NULL, endereco VARCHAR(200) NOT NULL, fone_residencial VARCHAR(20) NOT NULL, fone_celular VARCHAR(20) NOT NULL, curso_id BIGINT, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, INDEX usuario_type_idx (type), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = MyISAM;
ALTER TABLE usuario ADD CONSTRAINT usuario_curso_id_curso_id FOREIGN KEY (curso_id) REFERENCES curso(id);
ALTER TABLE area_interesse ADD CONSTRAINT area_interesse_professor_id_usuario_id FOREIGN KEY (professor_id) REFERENCES usuario(id) ON DELETE CASCADE;
ALTER TABLE arquivo_versao ADD CONSTRAINT arquivo_versao_id_arquivo_id FOREIGN KEY (id) REFERENCES arquivo(id) ON UPDATE CASCADE ON DELETE CASCADE;
ALTER TABLE arquivo ADD CONSTRAINT arquivo_remetente_id_usuario_id FOREIGN KEY (remetente_id) REFERENCES usuario(id);
ALTER TABLE arquivo ADD CONSTRAINT arquivo_destinatario_id_usuario_id FOREIGN KEY (destinatario_id) REFERENCES usuario(id);
ALTER TABLE artigo_versao ADD CONSTRAINT artigo_versao_id_artigo_id FOREIGN KEY (id) REFERENCES artigo(id) ON UPDATE CASCADE ON DELETE CASCADE;
ALTER TABLE artigo ADD CONSTRAINT artigo_aluno_id_usuario_id FOREIGN KEY (aluno_id) REFERENCES usuario(id);
ALTER TABLE artigo_avaliacao ADD CONSTRAINT artigo_avaliacao_artigo_id_artigo_id FOREIGN KEY (artigo_id) REFERENCES artigo(id);
ALTER TABLE artigo_comentario ADD CONSTRAINT artigo_comentario_artigo_id_artigo_id FOREIGN KEY (artigo_id) REFERENCES artigo(id);
ALTER TABLE banca ADD CONSTRAINT banca_professor_id_2_usuario_id FOREIGN KEY (professor_id_2) REFERENCES usuario(id);
ALTER TABLE banca ADD CONSTRAINT banca_professor_id_1_usuario_id FOREIGN KEY (professor_id_1) REFERENCES usuario(id);
ALTER TABLE banca ADD CONSTRAINT banca_aluno_id_usuario_id FOREIGN KEY (aluno_id) REFERENCES usuario(id);
ALTER TABLE banca_avaliacao ADD CONSTRAINT banca_avaliacao_banca_id_banca_id FOREIGN KEY (banca_id) REFERENCES banca(id);
ALTER TABLE cronograma ADD CONSTRAINT cronograma_proposta_id_proposta_id FOREIGN KEY (proposta_id) REFERENCES proposta(id);
ALTER TABLE mensagem ADD CONSTRAINT mensagem_remetente_id_usuario_id FOREIGN KEY (remetente_id) REFERENCES usuario(id);
ALTER TABLE mensagem ADD CONSTRAINT mensagem_original_id_mensagem_id FOREIGN KEY (original_id) REFERENCES mensagem(id);
ALTER TABLE mensagem ADD CONSTRAINT mensagem_destinatario_id_usuario_id FOREIGN KEY (destinatario_id) REFERENCES usuario(id);
ALTER TABLE orientacao ADD CONSTRAINT orientacao_professor_id_usuario_id FOREIGN KEY (professor_id) REFERENCES usuario(id);
ALTER TABLE orientacao ADD CONSTRAINT orientacao_aluno_id_usuario_id FOREIGN KEY (aluno_id) REFERENCES usuario(id);
ALTER TABLE professor_area_afinidade ADD CONSTRAINT professor_area_afinidade_professor_id_usuario_id FOREIGN KEY (professor_id) REFERENCES usuario(id);
ALTER TABLE professor_area_afinidade ADD CONSTRAINT professor_area_afinidade_area_afinidade_id_area_afinidade_id FOREIGN KEY (area_afinidade_id) REFERENCES area_afinidade(id);
ALTER TABLE proposta_versao ADD CONSTRAINT proposta_versao_id_proposta_id FOREIGN KEY (id) REFERENCES proposta(id) ON UPDATE CASCADE ON DELETE CASCADE;
ALTER TABLE proposta ADD CONSTRAINT proposta_aluno_id_usuario_id FOREIGN KEY (aluno_id) REFERENCES usuario(id);
ALTER TABLE proposta_avaliacao ADD CONSTRAINT proposta_avaliacao_proposta_id_proposta_id FOREIGN KEY (proposta_id) REFERENCES proposta(id);
ALTER TABLE proposta_comentario ADD CONSTRAINT proposta_comentario_proposta_id_proposta_id FOREIGN KEY (proposta_id) REFERENCES proposta(id);
ALTER TABLE t_c_c ADD CONSTRAINT t_c_c_aluno_id_usuario_id FOREIGN KEY (aluno_id) REFERENCES usuario(id);
